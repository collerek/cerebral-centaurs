WhiteBoard:
    message: ""
    bg_color: 0, 0, 0
    canvas.before:
        Color:
            hsv: self.bg_color
        Rectangle:
            pos: self.pos
            size: self.size
    orientation: 'vertical'
    Label:
        color: 1, 0, 1, 1
        id: label
        size_hint_y: .25
        font_size: dp(10)
        text_size: self.width, None
        texture_size: self.size
        halign: 'center'
        text: root.btn_text
    FloatLayout:
        canvas:
            Color:
                hsv: .3, .2, .1
            Rectangle:
                pos: self.pos
                size: self.size
        TestCanvas:
            root: root
            pos_hint: {'center_x': .5, 'center_y': .5}
            offset_x: 0
            offset_y: 0
            id: canvas
            size_hint: None, None
            size: 400, 400
            draw_mark: .1, .2, .3
            canvas:
                Color:
                    hsv: self.draw_mark
                Rectangle:
                    pos: self.x + self.offset_x, self.y + self.offset_y
                    size: self.size
        BoxLayout:
            size_hint_y: .2
            id: tools
            padding: dp(10)
            spacing: dp(10)
            BoxLayout:
                orientation: 'vertical'
                Button:
                    text: 'inc width'
                    on_release:
                        canvas.width += 5
                Button:
                    text: 'dec width'
                    on_release:
                        canvas.width -= 5
            BoxLayout:
                orientation: 'vertical'
                Button:
                    text: 'inc height'
                    on_release:
                        canvas.height += 10
                Button:
                    text: 'dec height'
                    on_release:
                        canvas.height -= 10
            BoxLayout:
                orientation: 'vertical'
                Button:
                    text: 'right'
                    on_release:
                        canvas.offset_x += 10
                Button:
                    text: 'left'
                    on_release:
                        canvas.offset_x -= 10
            BoxLayout:
                orientation: 'vertical'
                Button:
                    text: 'up'
                    on_release:
                        canvas.offset_y += 10
                Button:
                    text: 'down'
                    on_release:
                        canvas.offset_y -= 10
            Button:
                size_hint_x: .1
                text: '->' if tools.x else '<-'
                on_release:
                    tools.x = -self.x
        BoxLayout:
            id: instructions
            orientation: 'vertical'
            size_hint: .1, .3
            pos_hint: {'top': .9}
            spacing: dp(5)
            padding: dp(5)
            Widget:
                value: 0
                canvas.before:
                    Color:
                        hsv: self.value, 1, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                on_value: canvas.colour = self.value, 1, 1
                on_touch_down:
                    self.value = args[1].x/self.right if self.collide_point(*args[1].pos) else self.value # *can bug*
            BoxLayout:
                Button:
                    text: '-'
                    on_release:
                        canvas.line_width -= 1
                Button:
                    text: '+'
                    on_release:
                        canvas.line_width += 1
            Button:
                text: 'clear'
                on_release:
                    canvas.line_width = 10
                    canvas.colour = canvas.draw_mark
        Button:
            size_hint: .05,.05
            pos_hint: {'top': 1}
            text: '>' if instructions.x < 0 else '<'
            on_release:
                instructions.x = [-instructions.width, self.x][self.text == '>']
